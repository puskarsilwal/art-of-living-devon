---
phase: 07-event-pages
plan: "04"
type: execute
wave: 3
depends_on:
  - "07-01"
  - "07-02"
  - "07-03"
files_modified:
  - src/app/(landing)/events/[slug]/page.tsx
  - src/app/(main)/events/page.tsx
autonomous: true
requirements:
  - EVENT-01
  - EVENT-02
  - EVENT-03

must_haves:
  truths:
    - "Visiting /events/satsang-2026-march renders a complete event landing page with all 8 sections"
    - "The page is statically generated via generateStaticParams — no server-side rendering per request"
    - "Visiting an invalid slug (e.g. /events/fake-event) renders the Next.js 404 page"
    - "Visiting /events shows a grid of upcoming event cards linking to each event detail page"
    - "The /events index has SiteHeader + SiteFooter (main route group); /events/[slug] has no nav (landing route group)"
    - "generateMetadata returns correct SEO title and description per event"
  artifacts:
    - path: "src/app/(landing)/events/[slug]/page.tsx"
      provides: "Dynamic event page — SSG, no layout header/footer"
      exports: ["default", "generateStaticParams", "generateMetadata"]
    - path: "src/app/(main)/events/page.tsx"
      provides: "Events index — browsing page with site nav"
      exports: ["default"]
  key_links:
    - from: "src/app/(landing)/events/[slug]/page.tsx"
      to: "getEventBySlug()"
      via: "const event = getEventBySlug(slug)"
      pattern: "getEventBySlug"
    - from: "src/app/(landing)/events/[slug]/page.tsx"
      to: "src/components/events/*.tsx"
      via: "JSX section composition"
      pattern: "EventHeroSection|EventDetailsBar|EventExperienceSection"
    - from: "src/app/(main)/events/page.tsx"
      to: "getAllEvents()"
      via: "const events = getAllEvents()"
      pattern: "getAllEvents"
---

<objective>
Assemble the dynamic event page route and events index page — connecting all components and data into two working routes.

Purpose: This plan wires everything built in Plans 01-03 into the actual Next.js routes. After this plan, `/events/satsang-2026-march` and `/events` are both fully functional. The homepage's `/events` link (already set up in Phase 6) will resolve correctly.
Output: Two page files creating `/events/[slug]` (landing group) and `/events` (main group).
</objective>

<execution_context>
@/Users/mac/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mac/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/07-event-pages/07-CONTEXT.md
@.planning/phases/07-event-pages/07-RESEARCH.md
@.planning/phases/07-event-pages/07-01-SUMMARY.md
@.planning/phases/07-event-pages/07-02-SUMMARY.md
@.planning/phases/07-event-pages/07-03-SUMMARY.md

# Existing page assembler patterns
@src/app/(landing)/intro/page.tsx
@src/app/(landing)/art-of-living-part-1/page.tsx
@src/app/(main)/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Dynamic event page — /events/[slug]</name>
  <files>src/app/(landing)/events/[slug]/page.tsx</files>
  <action>
Create `src/app/(landing)/events/[slug]/page.tsx` as an async server component.

This file MUST:
1. Live inside the `(landing)` route group so it inherits the no-header/no-footer layout
2. Export `generateStaticParams` for SSG (generates one page per event at build time)
3. Export `generateMetadata` for SEO
4. `await params` before destructuring (Next.js 16 — params is a Promise)
5. Call `notFound()` for unknown slugs

```typescript
import { notFound } from "next/navigation"
import { getAllEvents, getEventBySlug } from "@/lib/data/events"
import type { Metadata } from "next"

// Import all 8 section components
import { EventHeroSection } from "@/components/events/event-hero-section"
import { EventDetailsBar } from "@/components/events/event-details-bar"
import { EventExperienceSection } from "@/components/events/event-experience-section"
import { EventExplainerSection } from "@/components/events/event-explainer-section"
import { EventVideoSection } from "@/components/events/event-video-section"
import { EventSocialProof } from "@/components/events/event-social-proof"
import { EventEmailOptin } from "@/components/events/event-email-optin"
import { EventFooterCta } from "@/components/events/event-footer-cta"

export async function generateStaticParams() {
  return getAllEvents().map((event) => ({ slug: event.slug }))
}

export async function generateMetadata(
  { params }: { params: Promise<{ slug: string }> }
): Promise<Metadata> {
  const { slug } = await params
  const event = getEventBySlug(slug)
  if (!event) return {}
  return {
    title: event.seoTitle ?? `${event.title} | Art of Living Devon`,
    description: event.seoDescription ?? event.description,
    robots: event.robots ?? { index: true, follow: true },
  }
}

export default async function EventPage(
  { params }: { params: Promise<{ slug: string }> }
) {
  const { slug } = await params
  const event = getEventBySlug(slug)
  if (!event) notFound()

  return (
    <main>
      {/* Conversion funnel order (per RESEARCH.md section order recommendation):
          1. Hero — event name, date, primary CTA
          2. Details bar — where/when/duration/price at a glance
          3. Experience — "what it feels like" narrative + pull quote
          4. Explainer — what is Satsang/Kirtan? removes uncertainty
          5. Video — past event footage (conditional: only if videoUrl set)
          6. Social proof — credibility logos + local testimonials
          7. Email opt-in — lead capture (Brevo wired Phase 9)
          8. Footer CTA — final register push
      */}
      <EventHeroSection event={event} />
      <EventDetailsBar event={event} />
      <EventExperienceSection event={event} />
      <EventExplainerSection event={event} />
      {event.videoUrl && <EventVideoSection videoUrl={event.videoUrl} />}
      <EventSocialProof testimonials={event.testimonials} />
      <EventEmailOptin event={event} />
      <EventFooterCta event={event} />
    </main>
  )
}
```

Verify folder path is exactly: `src/app/(landing)/events/[slug]/page.tsx`
The `(landing)` route group's layout.tsx has no header/footer — this is correct for a conversion funnel.

CRITICAL: Do NOT use `<Link>` for external registrationUrl in any component — already handled in individual section components, but double-check imports.
  </action>
  <verify>
    <automated>cd "/Users/mac/Documents/Art of Living Landing Page" && npx tsc --noEmit 2>&1 | grep -E "\(landing\)/events|\[slug\]" || echo "Dynamic event page passes type check"</automated>
    <automated>cd "/Users/mac/Documents/Art of Living Landing Page" && npm run build 2>&1 | tail -20</automated>
  </verify>
  <done>src/app/(landing)/events/[slug]/page.tsx exists; generateStaticParams and generateMetadata exported; npm run build succeeds with /events/satsang-2026-march listed as a static route</done>
</task>

<task type="auto">
  <name>Task 2: Events index page — /events</name>
  <files>src/app/(main)/events/page.tsx</files>
  <action>
Create `src/app/(main)/events/page.tsx` as a server component.

This file MUST live inside the `(main)` route group so it inherits SiteHeader + SiteFooter from `src/app/(main)/layout.tsx`. This is a browsing/directory page, not a conversion funnel.

```typescript
import Link from "next/link"
import Image from "next/image"
import { getAllEvents } from "@/lib/data/events"
import { Badge } from "@/components/ui/badge"
import { Button } from "@/components/ui/button"
import { Calendar, MapPin } from "lucide-react"
import type { Metadata } from "next"

export const metadata: Metadata = {
  title: "Events | Art of Living Devon & Southwest",
  description: "Upcoming Satsang, Kirtan, and community events in Devon and Southwest. Free and open to all.",
}

export default function EventsPage() {
  const events = getAllEvents()

  return (
    <main className="min-h-screen bg-white">
      {/* Page header */}
      <section className="bg-muted/30 py-16 sm:py-20 px-4 sm:px-6 text-center">
        <div className="max-w-3xl mx-auto">
          <Badge className="mb-4 bg-primary/10 text-primary border-primary/20">Community Events</Badge>
          <h1 className="text-4xl sm:text-5xl font-bold text-gray-900 mb-4">Upcoming Events</h1>
          <p className="text-gray-600 text-lg">Satsang evenings, Kirtan gatherings, and community events in Devon and Southwest.</p>
        </div>
      </section>

      {/* Events grid */}
      <section className="py-16 sm:py-20 px-4 sm:px-6">
        <div className="max-w-6xl mx-auto">
          {events.length === 0 ? (
            <p className="text-center text-gray-500 text-lg py-12">No upcoming events scheduled. Check back soon.</p>
          ) : (
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
              {events.map((event) => (
                <article key={event.slug} className="group rounded-2xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                  {/* Card image */}
                  <div className="relative h-48 overflow-hidden">
                    <Image
                      src={event.heroImage}
                      alt={event.title}
                      fill
                      className="object-cover group-hover:scale-105 transition-transform duration-500"
                    />
                    <div className="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent" />
                    <Badge className="absolute top-3 left-3 bg-white/90 text-gray-800 text-xs">
                      {event.eventType === "satsang" ? "Satsang" :
                       event.eventType === "kirtan" ? "Kirtan" : "Event"}
                    </Badge>
                  </div>
                  {/* Card content */}
                  <div className="p-5">
                    <h2 className="text-lg font-bold text-gray-900 mb-1 group-hover:text-primary transition-colors">{event.title}</h2>
                    {event.subtitle && (
                      <p className="text-sm text-gray-500 italic mb-3">{event.subtitle}</p>
                    )}
                    <div className="flex items-center gap-2 text-sm text-gray-600 mb-1">
                      <Calendar className="h-4 w-4 text-primary flex-shrink-0" />
                      <span>{event.date} · {event.time} {event.timezone}</span>
                    </div>
                    <div className="flex items-center gap-2 text-sm text-gray-600 mb-4">
                      <MapPin className="h-4 w-4 text-primary flex-shrink-0" />
                      <span>{event.location}</span>
                    </div>
                    {event.price && (
                      <p className="text-sm font-medium text-primary mb-4">{event.price}</p>
                    )}
                    <Link href={`/events/${event.slug}`}>
                      <Button variant="outline" className="w-full">View Details</Button>
                    </Link>
                  </div>
                </article>
              ))}
            </div>
          )}
        </div>
      </section>
    </main>
  )
}
```

Note: The `/events` index uses `<Link href={/events/${event.slug}}>` for INTERNAL navigation to the event detail page — this is correct (Link is for internal routes). Only the external registrationUrl in the section components uses `<a target="_blank">`.

The `(main)` route group layout already wraps this page with SiteHeader + SiteFooter — no need to import them here.
  </action>
  <verify>
    <automated>cd "/Users/mac/Documents/Art of Living Landing Page" && npx tsc --noEmit 2>&1 | grep -E "\(main\)/events" || echo "Events index passes type check"</automated>
  </verify>
  <done>src/app/(main)/events/page.tsx exists in (main) route group; renders event cards grid from getAllEvents(); links to /events/[slug] with internal Link; empty state handled; no TypeScript errors</done>
</task>

</tasks>

<verification>
Run `cd "/Users/mac/Documents/Art of Living Landing Page" && npm run build` — build succeeds with:
- /events listed as a static page (main group, with nav)
- /events/satsang-2026-march listed as a static page (landing group, no nav)
- Zero build errors

Run `npx tsc --noEmit` — zero TypeScript errors.
</verification>

<success_criteria>
- /events/satsang-2026-march renders all 8 sections when visited locally
- /events renders event cards grid with at least 1 Satsang entry
- generateStaticParams generates satsang-2026-march slug at build time
- Invalid slug /events/not-real returns 404 via notFound()
- npm run build succeeds with zero errors
- /events index has site header/footer (main group); /events/[slug] has no nav (landing group)
</success_criteria>

<output>
After completion, create `.planning/phases/07-event-pages/07-04-SUMMARY.md`
</output>
